import"../chunks/DsnmJJEf.js";import{i as ma}from"../chunks/pEzoLNAv.js";import{q as ba,I as u,J as fa,v as $,x as _,y as ua,K as a,L as x,M as m,N as Q,z as G,A as S,C as R,D as n,u as r,G as y,H as l,F as E,O as W}from"../chunks/Bg6t5N8x.js";import{p as xa,i as H,b as pa,s as ga}from"../chunks/g4b5VIZf.js";import{c as ya,e as J,i as K}from"../chunks/-IAPk5y9.js";import{p as $a}from"../chunks/D0Zpy5mZ.js";var ha=$('<li class="svelte-c9yb7i"> <!> <!> </li>'),da=$('<li class="svelte-c9yb7i"> <br/> <br/> <br/> <ol class="svelte-c9yb7i"><!> <hr/> <br/> <br/> <br/></ol></li>'),Ta=$(" <!> <br/>",1),Sa=$("<strong> </strong> <br/> <!> <br/>",1),qa=$('<ul class="svelte-c9yb7i"></ul> <hr/> <br/> <br/> <hr/> <strong>Screen-printing format:</strong> <br/> <!>',1),Na=$('<form><label for="code">School code:</label> <input name="code" type="text" placeholder="School code"/> <button type="submit">View Team Cart</button></form>'),ka=$('<main class="svelte-c9yb7i"><!></main>');function wa(sa,X){ba(X,!1);const[ra,oa]=pa(),Y=()=>ga($a,"$page",ra),L=m(),i=m(),O=m(),M=m(),j=m(),Z=m(),I=m(),aa=m();xa(X,"data",8);const o=m({});u(()=>(a(L),a(i),a(O),Y()),()=>{(e=>{x(L,e.success),x(i,e.orders),x(O,e.school)})(Y().data)}),u(()=>a(O),()=>{x(M,ya[a(O)])}),u(()=>(a(j),a(M)),()=>{(e=>{x(j,e.products)})(a(M))}),u(()=>a(i),()=>{x(Z,a(i).reduce((e,c)=>e+Number(c.subtotal),0).toFixed(2))}),u(()=>a(i),()=>{x(I,a(i).reduce((e,c)=>e+Number(c.salesTax),0).toFixed(2))}),u(()=>a(i),()=>{x(aa,a(i).reduce((e,c)=>e+Number(c.grandTotal),0).toFixed(2))}),u(()=>a(j),()=>{for(let e of a(j))Q(o,a(o)[e.id]={})}),u(()=>(a(i),a(o)),()=>{for(const e of a(i))for(const c of e.cart){const{id:b,size:p,quantity:q,customization:N,varsity:C}=c;if(Q(o,a(o)[b][[p]]=a(o)[b][[p]]||{quantity:0,names:[]}),Q(o,a(o)[b][[p]].quantity+=q),N||C){const h=N.toUpperCase(),t=C?`${h}/V`:h;let f=q;for(;f--;)a(o)[b][[p]].names.push(t)}}}),fa(),ma();var U=ka(),na=G(U);{var la=e=>{var c=qa(),b=R(c);J(b,5,()=>a(i),K,(h,t)=>{var f=da(),d=G(f),V=n(d,2),w=n(V,2),D=n(w,3),v=G(D);J(v,1,()=>(a(t),r(()=>a(t).cart)),K,(B,s)=>{var T=ha(),P=G(T),ta=n(P);{var ia=g=>{var A=W();y(()=>l(A,`name = ${a(s),r(()=>a(s).customization)??""} /`)),_(g,A)};H(ta,g=>{a(s),r(()=>a(s).customization)&&g(ia)})}var ea=n(ta,2);{var va=g=>{var A=W("Varsity imprint /");_(g,A)};H(ea,g=>{a(s),r(()=>a(s).varsity)&&g(va)})}var _a=n(ea);S(T),y(()=>{l(P,`${a(s),r(()=>a(s).id)??""} /
                        ${a(s),r(()=>a(s).title)??""} /
                        ${a(s),r(()=>a(s).size)??""} / `),l(_a,` qty = ${a(s),r(()=>a(s).quantity)??""} /
                        ${a(s),r(()=>a(s).dynamicPrice)??""}`)}),_(B,T)});var k=n(v,3),F=n(k,2),z=n(F,2);E(),S(D),S(f),y(()=>{l(d,`Order ID: ${a(t),r(()=>a(t)._id)??""} `),l(V,` Name: ${a(t),r(()=>a(t).name)??""} `),l(w,` Email: ${a(t),r(()=>a(t).email)??""} `),l(k,` Subtotal: ${a(t),r(()=>a(t).subtotal)??""} `),l(F,` Sales tax: ${a(t),r(()=>a(t).salesTax)??""} `),l(z,` Grand total: ${a(t),r(()=>a(t).grandTotal)??""} `)}),_(h,f)}),S(b);var p=n(b,3),q=n(p,2),N=n(q,2),C=n(N,7);J(C,1,()=>(a(o),r(()=>Object.keys(a(o)))),K,(h,t)=>{var f=Sa(),d=R(f),V=G(d,!0);S(d);var w=n(d,4);J(w,1,()=>(a(o),a(t),r(()=>Object.keys(a(o)[a(t)]))),K,(D,v)=>{E();var k=Ta(),F=R(k),z=n(F);{var B=s=>{var T=W();y(P=>l(T,`(${P??""})`),[()=>(a(o),a(t),a(v),r(()=>a(o)[a(t)][a(v)].names.join(", ")))]),_(s,T)};H(z,s=>{a(o),a(t),a(v),r(()=>a(o)[a(t)][a(v)].names.length>0)&&s(B)})}E(2),y(()=>l(F,`  ${a(o),a(t),a(v),r(()=>a(o)[a(t)][a(v)].quantity)??""} ${a(v)??""} `)),_(D,k)}),E(2),y(()=>l(V,a(t))),_(h,f)}),y(()=>{l(p,` Team Subtotal: ${a(Z)??""} `),l(q,` Team Sales tax: ${a(I)??""} `),l(N,` Team Grand total: ${a(aa)??""} `)}),_(e,c)},ca=e=>{var c=Na();_(e,c)};H(na,e=>{a(L)?e(la):e(ca,!1)})}S(U),_(sa,U),ua(),oa()}export{wa as component};
